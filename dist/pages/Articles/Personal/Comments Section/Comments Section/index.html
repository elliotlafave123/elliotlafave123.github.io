<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFS3PHN0E0"></script>
  <script lang="js">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-ZFS3PHN0E0");
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" type="../image/png" href="../img/logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&family=Zen+Kaku+Gothic+New:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/ecfebc6e17.js" crossorigin="anonymous"></script>
  <meta name="description" content="Elliot La Fave's personal website and portfolio. A collection of all my work and my CV.">
  <meta name="keywords" content="Elliotlafave, Elliot, la, fave, web, design, cv, portfolio, projects, javascript, nodejs, manchester, astro, software, developer, apprentice">
  <meta name="author" content="Elliot La Fave">
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <script defer src="/scripts/SiteFrontendTSBundle.js"></script>

  <title>Comments Section | Elliotlafave.com</title>
<link rel="stylesheet" href="/assets/My Process.f4f26f17.css" /></head>

  <body>
    <div class="c-accessibility-menu">
  <div class="c-accessibility-menu__item">
    <a href="#main" class="c-accessibility-menu__link">Skip to main content</a>
  </div>
</div>

<button class="c-mobile-menu-toggle" aria-label="Open menu">
  <i class="fa-sharp fa-regular fa-bars"></i>
</button>

<header class="c-header">
  <div class="c-header__top">
    <div class="c-header__logo">
      <a href="/" class="c-header__logo-link">
        <img src="https://d33wubrfki0l68.cloudfront.net/de4eb2840bd995fff8693e59dfbff5e8f7036730/36519/img/logo.png" alt="Elliot Lafave Logo" class="c-header__logo-image">
        <p>elliotlafave.com</p>
      </a>
    </div>

    <div class="c-header__authentication" id="headerAuthLoggedOut">
      <a href="/pages/login/signup.html" class="c-header__authentication-link storeBackLink">Sign up</a>
      <a href="/pages/login/login.html" class="c-header__authentication-link storeBackLink">Log in</a>
    </div>
    <div class="c-header__authentication" id="headerAuthLoggedIn" style="display: none;">
      <a href="/account.html" class="c-header__authentication-link">My account</a>
      <a href="/pages/login/login.html" class="c-header__authentication-link" id="logOutButton">Log out</a>
    </div>
  </div>
  <div class="c-header__bottom">
    <nav class="c-header__navigation">
      <ul class="c-header__navigation-list">
        <li class="c-header__navigation-item">
          <a href="/index.html" class="c-header__navigation-link">Home</a>
        </li>
        <li class="c-header__navigation-item">
          <a href="/CV.html" class="c-header__navigation-link">CV</a>
        </li>
        <li class="c-header__navigation-item is-primary">
          <a href="/portfolio.html" class="c-header__navigation-link">Portfolio <i class="c-header__chevron fa-sharp fa-regular fa-chevron-down"></i></a>
          <ul class="c-header__navigation-list c-header__sub-navigation">
            <li class="c-header__navigation-item">
              <a href="/portfolio.html#ProjectsAppContainer" class="c-header__navigation-link">Projects</a>
            </li>
          </ul>
        </li>
        <li class="c-header__navigation-item is-primary">
          <a href="/pages/Articles/index.html" class="c-header__navigation-link">Articles <i class="c-header__chevron fa-sharp fa-regular fa-chevron-down"></i></a>
          <ul class="c-header__navigation-list c-header__sub-navigation">
            <li class="c-header__navigation-item">
              <a href="/pages/Articles/Personal/index.html" class="c-header__navigation-link">Personal</a>
            </li>
            <li class="c-header__navigation-item">
              <a href="/pages/articles/gmc%20work/index.html" class="c-header__navigation-link">Work</a>
            </li>
            <li class="c-header__navigation-item">
              <a href="/pages/Articles/QA/index.html" class="c-header__navigation-link">Apprenticeship</a>
            </li>
          </ul>
        </li>
        <li class="c-header__navigation-item">
          <a href="/contact-me.html" class="c-header__navigation-link">Contact</a>
        </li>
      </ul>
    </nav>
    <div class="toggle-container">
      <i class="fa-sharp fa-regular fa-sun"></i>
      <input type="checkbox" id="checkboxSlider" class="toggle" tabindex="-1">
      <label for="checkboxSlider" class="darkModeLabel">
        <div class="ball"></div>
      </label>
      <i class="fa-sharp fa-regular fa-moon"></i>
    </div>
  </div>
</header>
    <main id="main">
      <!-- --- Article --- -->
      <section class="article">
        <!-- Interactions -->
        <div class="breadcrumb"></div>
        <div class="article__interactions">
          <div class="article__interactions--section">
            <a href="../../index.html" class="btn-square btn-square--back" id="first-section"><i class="fa-solid fa-arrow-left-long"></i>Back</a>
          </div>
          <div class="article__interactions--section">
            <button class="btn-square btn-square--green"><i class="fa-solid fa-check"></i>Approved</button>
          </div>
        </div>
        <div class="article__header">
          <h1>Comments Section</h1>

          <div class="article__header-info">
            <span>Elliot La Fave</span>
            <p>&#183;</p>
            <span>07/10/2022</span>
            <p>&#183;</p>
            <span>16:35pm</span>
          </div>

          <link rel="stylesheet" href="/assets/My Process.f4f26f17.css" /><div class="article__section" id="Idea">
    <h2>The Idea</h2>
    <p>
      Over the last week I have been on a course namely 'Website fundimentals' where we are learning the basics of HTML,
      CSS and JS.
    </p>
    <p>
      As I have previously learned most of the content for the first four days I decided to give myself a challange to
      complete over these days.
    </p>
    <p>In the past I had an idea to add a comments section to the articles on my website (like this one).</p>
  </div><div class="article__section" id="Plan">
    <h2>My Plan</h2>
    <p>I created a list of features which would be required to complete the project:</p>
    <div class="article__user-story">
      <ul class="u-margin-bottom-medium">
        <li>Build login / sign up forms</li>
        <li>Verify user emails</li>
        <li>Create a 'signed in strip' so users know when they are logged in</li>
        <li>Design the look of a comment</li>
        <li>API to handle comment storage</li>
      </ul>
    </div>
  </div><div class="article__section" id="API">
    <h2>The API</h2>
    <p>For the API to be fully functional I needed to create the following endpoints:</p>
    <div class="article__user-story">
      <ul class="u-margin-bottom-medium">
        <li>Create comment stream</li>
        <li>GET all comments from stream</li>
        <li>POST a comment to a stream</li>
        <li>PUT - Edit a comment</li>
        <li>DELETE a comment</li>
        <li>Vote - up and down</li>
      </ul>
    </div>
  </div><div class="article__section" id="UserLogin">
    <h2>Integrating user login</h2>
    <p>
      I had already created a user authentication API, it is used in this
      <a href="https://login.elliotlafave.com" target="_blank">user authentication app</a>.
    </p>
    <p>
      The app uses JWT (JSON web token) authentication. This works by creating a random token when a user successfully
      logs in. The token is saved n their browser and will allow them access for an amount of time until the token
      expires and they must log in again.
    </p>
    <p>
      I designed the pages and connected them to the API and it worked straight away, that would've been the most
      difficult part if I hadn't created the authentication API previously. The signed in state is below:
    </p>
    <div class="article__image">
      <img src="./img/SignedInStrip.png" alt="Signed in strip" class="articleImg">
      <p>Signed in strip</p>
    </div>
    <p>
      I then added a Google Recaptcha checkbox to prevent spam on my site, I also added states for when users are signed
      in but their email is not verified:
    </p>
    <div class="article__image">
      <img src="./img/VerifyStrip.png" alt="Verify email strip" class="articleImg">
      <p>Verify email strip</p>
    </div>
    <!--  -->
    <p>After logging in a user will be brought back to the page they started the login/sign up process from.</p>
    <p>The pages for the login/sign up pages are below:</p>
    <div class="article__user-story">
      <ul class="u-margin-bottom-medium">
        <li>Log In: <a class="storeBackLink" href="../../../Login/login.html">Login</a></li>
        <li>Sign Up: <a class="storeBackLink" href="../../../Login/signUp.html">Sign Up</a></li>
      </ul>
    </div>
  </div><div class="article__section" id="CommentDesign">
    <h2>Comments Section Design</h2>
    <p>
      I first had to think about what data a comment would need. This would be the data model used by MongoDB and
      Typescript. The data model I settled with is below:
    </p>
    <div class="article__user-story">
      <ul class="u-margin-bottom-medium">
        <li>ID</li>
        <li>Text</li>
        <li>Full Name</li>
        <li>Time</li>
        <li>upvotes</li>
        <li>downvotes</li>
        <li>hasBeenEdited</li>
      </ul>
    </div>
    <p>I then created the markup for a comment and styled it using SCSS:</p>
    <div class="article__image">
      <img src="./img/AComment.png" alt="A Comment" class="articleImg">
      <p>A Comment</p>
    </div>
    <p>When a user is not signed in they will see this state:</p>
    <div class="article__image">
      <img src="./img/CommentsLogIn.png" alt="Comments section login buttons" class="articleImg">
      <p>Comments section login buttons</p>
    </div>
    <p>When a user is signed in, but their email is not verified they see this state:</p>
    <div class="article__image">
      <img src="./img/CommentsVerify.png" alt="Comments section verify email" class="articleImg">
      <p>Comments section verify email</p>
    </div>
    <p>If a user is signed in and their email is verified they see the comment input box:</p>
    <div class="article__image">
      <img src="./img/CommentInputSignedIn.png" alt="Unlocked comment input textarea" class="articleImg">
      <p>Unlocked comment input textarea</p>
    </div>
    <p>All of the designs are responsive so they work on all devices.</p>
  </div><div class="article__section" id="CommentAPI">
    <h2>The Comment API</h2>
    <p>For the API, I wrote the code using Express (A NodeJS library) and Mongoose (A MongoDB library).</p>
    <p>
      I added a folder into my API server repository and created all of the required endpoints, I used Postman to send
      requests to the API while developing it.
    </p>
    <p>All of the endpoints use the JWT token to ensure that only verified users can comment.</p>
    <div class="article__image article__image-thin">
      <img src="./img/PostmanEndpoints.png" alt="Comments API Endpoints in Postman" class="articleImg">
      <p>Comments API Endpoints in Postman</p>
    </div>
    <p>
      The API is running on a <a href="https://www.linode.com/" target="_blank">Linode</a> cloud based server. I have configured
      the server to use HTTPS and with the E-Mail ports allowed so I can send email verification codes to users.
    </p>
    <p>
      The database is running on a
      <a href="https://www.mongodb.com/atlas/database" target="_blank">MongoDB Atlas Cloud</a> which is a free service up
      to a certain amount of traffic or data stored.
    </p>
  </div><div class="article__section">
    <div id="CommentTS">
      <h2>The Frontend Logic</h2>
      <p>
        For the rendering of comments along with the user interface interactions, I chose to go with TypeScript (TS). I
        find TS to be less error prone and easier to code with due to the in editor error checking.
      </p>
      <p>
        I wrote logic to call the GET all on stream endpoint, then it will use the data and render it to the page using
        the JS 'InsertAdjacentHTML' method.
      </p>

      <p>
        Each rendered comment has an ID added to the DataSet property, this is used when editing or deleting a comment.
      </p>
    </div>
    <p>Users can click the edit button on their comment if they are logged in which changes the look of the comment:</p>
    <div class="article__image">
      <img src="./img/Editing.png" alt="Editing state of a comment" class="articleImg">
      <p>Editing state of a comment</p>
    </div>
    <p>When editing users can use the DELETE endpoint and the PUT (update) endpoint.</p>

    <h3>You can try it out below...</h3>
  </div>
        </div>
      </section>
    </main>

    <!-- Comments Section --><section class="comments-container" data-stream="633ec855c6bdedc1a0812586" id="commentStreamContainer">
  <h2 id="comments">Comments</h2>
  <div>
    <form class="add-comment-container" onsubmit="return false">
      <div class="add-comment-container-notAllowed">
        <a id="logInButton" class="c-button c-button--large c-button--semi-round c-button--primary c-button--primary--with-border storeBackLink u-margin-right-small" href="/pages/Login/login.html">Log In</a>
        <a id="signUpButton" class="c-button c-button--large c-button--semi-round c-button--primary-secondary c-button--primary-secondary--with-border storeBackLink" href="/pages/Login/signUp.html">Sign Up</a>
        <a id="verifyEmailButton" class="btn btn-purple-small btn-purple-small-warning storeBackLink" href="/pages/Login/verifyEmail.html">Verify Email</a>
      </div>
      <label for="commentTextarea">Enter your comment...</label>
      <textarea placeholder="Type your comment in here..." name="commentTextarea" id="commentTextarea" minlength="3" maxlength="120" required></textarea>
      <input type="submit" value="Publish" id="publishCommentButton">
    </form>
  </div>
  <div id="InsertCommentsContainer"></div>
</section>
    <!-- Footer --><div class="c-strip">
  <h2>Need a website?</h2>
  <a href="/Get a quote/" class="c-button c-button--medium c-button--semi-round c-button--primary-secondary c-button--primary-secondary--with-border" aria-label="Aria label">
    Get a quote today
  </a>
</div>

<footer class="c-footer">
  <div class="c-footer__head">
    <a class="c-footer__head-site-name" href="./index.html">elliotlafave.com</a>
    <div class="c-footer__head-links">
      <a href="/index">Home</a>
      <a href="/CV">CV</a>
      <a href="/portfolio">Portfolio</a>
    </div>
  </div>
  <div class="c-footer__body">
    <div class="c-footer__body-link-grid">
      <div class="c-footer__body-link-group">
        <a href="/pages/Login/login.html">Login</a>
        <a href="/pages/Login/signUp.html">Sign up</a>
        <a href="/account.html">My account</a>
      </div>
      <div class="c-footer__body-link-group">
        <a href="https://tools.elliotlafave.com/#/">Developer tools</a>
        <a href="https://uptime.elliotlafave.com/status/websites">Uptime</a>
        <a href="https://components.elliotlafave.com/">Component library</a>
        <a href="https://zeroheight.com/02f0b0962">Style guide</a>
      </div>
      <div class="c-footer__body-link-group">
        <a href="/Get a quote/">Get a quote</a>
        <a href="/pages/Articles/index.html">Articles</a>
        <a href="/contact-me.html">Contact me</a>
        <a href="/portfolio.html#all-projects">Projects</a>
      </div>
    </div>
    <div class="c-footer__body-social">
      <a href="https://www.linkedin.com/in/elliot-la-fave-4215b6222/?locale=es_ES" class="c-button c-button--medium c-button--square c-button--ghost" aria-label="Aria label">
        <img src="/img/linkedin-brands.svg" alt="Linkedin Logo">
        Linkedin
      </a>
      <a href="https://codepen.io/elliotlafave123" class="c-button c-button--medium c-button--square c-button--ghost" aria-label="Aria label">
        <img src="/img/codepen-brands.svg" alt="Codepen Logo">
        Codepen
      </a>
      <a href="https://github.com/elliotlafave123/elliotlafave123.github.io" class="c-button c-button--medium c-button--square c-button--ghost" aria-label="Aria label">
        <img src="/img/github-brands.svg" alt="GitHub Logo">
        GitHub
      </a>
    </div>
  </div>
  <div class="c-footer__branding">
    <div class="c-footer__branding-logo">
      <a href="/index.html"><img src="/img/logo.png" alt="Footer Logo"></a>
      <p><i class="fa-sharp fa-regular fa-copyright"></i> <span id="currentYear">0000</span> Elliot La Fave</p>
    </div>
    <div class="c-footer__branding-links">
      <a href="https://elliotlafave.com/privacypolicy">Privacy policy</a>
      <a href="https://elliotlafave.com/termsandconditions">Terms of service</a>
      <a href="https://elliotlafave.com/cookiepolicy">Cookie policy</a>
    </div>
  </div>
</footer>
  </body></html>